<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>2 The Generate Pipeline | LexOPS Walkthrough</title>
  <meta name="description" content="An introduction to the LexOPS package and how to use it." />
  <meta name="generator" content="bookdown 0.17 and GitBook 2.6.7" />

  <meta property="og:title" content="2 The Generate Pipeline | LexOPS Walkthrough" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="An introduction to the LexOPS package and how to use it." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="2 The Generate Pipeline | LexOPS Walkthrough" />
  
  <meta name="twitter:description" content="An introduction to the LexOPS package and how to use it." />
  

<meta name="author" content="Jack Taylor" />


<meta name="date" content="2020-02-06" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="introduction.html"/>
<link rel="next" href="advanced-stimulus-generation.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="include\style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><b><a href="index.html">LexOPS Walkthrough</a></b></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Overview</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#useful-links"><i class="fa fa-check"></i>Useful Links</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#what-is-lexops"><i class="fa fa-check"></i><b>1.1</b> What is LexOPS?</a></li>
<li class="chapter" data-level="1.2" data-path="introduction.html"><a href="introduction.html#installation"><i class="fa fa-check"></i><b>1.2</b> Installation</a><ul>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#installing-r"><i class="fa fa-check"></i>Installing R</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#installing-rstudio"><i class="fa fa-check"></i>Installing RStudio</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#installing-lexops"><i class="fa fa-check"></i>Installing LexOPS</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="introduction.html"><a href="introduction.html#the-shiny-app"><i class="fa fa-check"></i><b>1.3</b> The Shiny App</a></li>
<li class="chapter" data-level="1.4" data-path="introduction.html"><a href="introduction.html#the-lexops-dataset"><i class="fa fa-check"></i><b>1.4</b> The LexOPS Dataset</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="the-generate-pipeline.html"><a href="the-generate-pipeline.html"><i class="fa fa-check"></i><b>2</b> The Generate Pipeline</a><ul>
<li class="chapter" data-level="2.1" data-path="the-generate-pipeline.html"><a href="the-generate-pipeline.html#generating-stimuli"><i class="fa fa-check"></i><b>2.1</b> Generating Stimuli</a><ul>
<li class="chapter" data-level="" data-path="the-generate-pipeline.html"><a href="the-generate-pipeline.html#a-practical-example"><i class="fa fa-check"></i>A Practical Example</a></li>
<li class="chapter" data-level="" data-path="the-generate-pipeline.html"><a href="the-generate-pipeline.html#output"><i class="fa fa-check"></i>Output</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="the-generate-pipeline.html"><a href="the-generate-pipeline.html#converting-to-long-format"><i class="fa fa-check"></i><b>2.2</b> Converting to Long Format</a></li>
<li class="chapter" data-level="2.3" data-path="the-generate-pipeline.html"><a href="the-generate-pipeline.html#plotting-the-design"><i class="fa fa-check"></i><b>2.3</b> Plotting the Design</a></li>
<li class="chapter" data-level="2.4" data-path="the-generate-pipeline.html"><a href="the-generate-pipeline.html#checking-representativeness"><i class="fa fa-check"></i><b>2.4</b> Checking Representativeness</a></li>
<li class="chapter" data-level="2.5" data-path="the-generate-pipeline.html"><a href="the-generate-pipeline.html#generating-as-many-as-possible"><i class="fa fa-check"></i><b>2.5</b> Generating as Many as Possible</a></li>
<li class="chapter" data-level="2.6" data-path="the-generate-pipeline.html"><a href="the-generate-pipeline.html#plotting-iterations"><i class="fa fa-check"></i><b>2.6</b> Plotting Iterations</a></li>
<li class="chapter" data-level="2.7" data-path="the-generate-pipeline.html"><a href="the-generate-pipeline.html#custom-dataframes"><i class="fa fa-check"></i><b>2.7</b> Custom Dataframes</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="advanced-stimulus-generation.html"><a href="advanced-stimulus-generation.html"><i class="fa fa-check"></i><b>3</b> Advanced Stimulus Generation</a><ul>
<li class="chapter" data-level="3.1" data-path="advanced-stimulus-generation.html"><a href="advanced-stimulus-generation.html#non-stimulus-splits"><i class="fa fa-check"></i><b>3.1</b> Non-Stimulus Splits</a></li>
<li class="chapter" data-level="3.2" data-path="advanced-stimulus-generation.html"><a href="advanced-stimulus-generation.html#map-functions-as-controls"><i class="fa fa-check"></i><b>3.2</b> Map Functions as Controls</a><ul>
<li class="chapter" data-level="3.2.1" data-path="advanced-stimulus-generation.html"><a href="advanced-stimulus-generation.html#orthographic-similarity"><i class="fa fa-check"></i><b>3.2.1</b> Orthographic Similarity</a></li>
<li class="chapter" data-level="3.2.2" data-path="advanced-stimulus-generation.html"><a href="advanced-stimulus-generation.html#phonological-similarity"><i class="fa fa-check"></i><b>3.2.2</b> Phonological Similarity</a></li>
<li class="chapter" data-level="3.2.3" data-path="advanced-stimulus-generation.html"><a href="advanced-stimulus-generation.html#other-uses"><i class="fa fa-check"></i><b>3.2.3</b> Other Uses</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="advanced-stimulus-generation.html"><a href="advanced-stimulus-generation.html#random-seeds"><i class="fa fa-check"></i><b>3.3</b> Random Seeds</a><ul>
<li><a href="advanced-stimulus-generation.html#setting-the-seed-in-the-generate-function">Setting the seed in the <code>generate()</code> function</a></li>
<li><a href="advanced-stimulus-generation.html#setting-the-seed-in-the-split_random-function">Setting the seed in the <code>split_random()</code> function</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="matching-individual-words.html"><a href="matching-individual-words.html"><i class="fa fa-check"></i><b>4</b> Matching Individual Words</a><ul>
<li class="chapter" data-level="4.1" data-path="matching-individual-words.html"><a href="matching-individual-words.html#example"><i class="fa fa-check"></i><b>4.1</b> Example</a></li>
<li class="chapter" data-level="4.2" data-path="matching-individual-words.html"><a href="matching-individual-words.html#matching-by-similarity"><i class="fa fa-check"></i><b>4.2</b> Matching by Similarity</a><ul>
<li class="chapter" data-level="4.2.1" data-path="matching-individual-words.html"><a href="matching-individual-words.html#orthographic-similarity-1"><i class="fa fa-check"></i><b>4.2.1</b> Orthographic similarity</a></li>
<li class="chapter" data-level="4.2.2" data-path="matching-individual-words.html"><a href="matching-individual-words.html#phonological-similarity-1"><i class="fa fa-check"></i><b>4.2.2</b> Phonological Similarity</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="lexops-shiny-app.html"><a href="lexops-shiny-app.html"><i class="fa fa-check"></i><b>5</b> LexOPS Shiny App</a><ul>
<li class="chapter" data-level="5.1" data-path="lexops-shiny-app.html"><a href="lexops-shiny-app.html#generate"><i class="fa fa-check"></i><b>5.1</b> Generate</a><ul>
<li class="chapter" data-level="5.1.1" data-path="lexops-shiny-app.html"><a href="lexops-shiny-app.html#specify-design"><i class="fa fa-check"></i><b>5.1.1</b> Specify Design</a></li>
<li class="chapter" data-level="5.1.2" data-path="lexops-shiny-app.html"><a href="lexops-shiny-app.html#options"><i class="fa fa-check"></i><b>5.1.2</b> Options</a></li>
<li class="chapter" data-level="5.1.3" data-path="lexops-shiny-app.html"><a href="lexops-shiny-app.html#results"><i class="fa fa-check"></i><b>5.1.3</b> Results</a></li>
<li class="chapter" data-level="5.1.4" data-path="lexops-shiny-app.html"><a href="lexops-shiny-app.html#review"><i class="fa fa-check"></i><b>5.1.4</b> Review</a></li>
<li class="chapter" data-level="5.1.5" data-path="lexops-shiny-app.html"><a href="lexops-shiny-app.html#codify"><i class="fa fa-check"></i><b>5.1.5</b> Codify</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="lexops-shiny-app.html"><a href="lexops-shiny-app.html#match-item"><i class="fa fa-check"></i><b>5.2</b> Match Item</a></li>
<li class="chapter" data-level="5.3" data-path="lexops-shiny-app.html"><a href="lexops-shiny-app.html#fetch"><i class="fa fa-check"></i><b>5.3</b> Fetch</a></li>
<li class="chapter" data-level="5.4" data-path="lexops-shiny-app.html"><a href="lexops-shiny-app.html#visualise"><i class="fa fa-check"></i><b>5.4</b> Visualise</a></li>
<li class="chapter" data-level="5.5" data-path="lexops-shiny-app.html"><a href="lexops-shiny-app.html#custom-variables"><i class="fa fa-check"></i><b>5.5</b> Custom Variables</a></li>
<li class="chapter" data-level="5.6" data-path="lexops-shiny-app.html"><a href="lexops-shiny-app.html#random-seeds-1"><i class="fa fa-check"></i><b>5.6</b> Random Seeds</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="vignettes.html"><a href="vignettes.html"><i class="fa fa-check"></i><b>6</b> Vignettes</a></li>
<li class="chapter" data-level="7" data-path="faq.html"><a href="faq.html"><i class="fa fa-check"></i><b>7</b> FAQ</a><ul>
<li class="chapter" data-level="" data-path="faq.html"><a href="faq.html#how-should-i-cite-lexops"><i class="fa fa-check"></i>How should I cite LexOPS?</a></li>
<li class="chapter" data-level="" data-path="faq.html"><a href="faq.html#what-is-a-match-null"><i class="fa fa-check"></i>What is a “match null”?</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/JackEdTaylor/LexOPS" target="blank"><i class="fa fa-github"></i> LexOPS GitHub</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">LexOPS Walkthrough</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="the-generate-pipeline" class="section level1">
<h1><span class="header-section-number">2</span> The Generate Pipeline</h1>
<div id="generating-stimuli" class="section level2">
<h2><span class="header-section-number">2.1</span> Generating Stimuli</h2>
<p>One of the most noteworthy features of LexOPS is that it can generate controlled stimuli for any possible factorial design. This can be done in a pipeline using 3 main functions:</p>
<br>
<div class="float-third-left">
<p>
<code>split_by()</code>
</p>
<p>
to specify “splits” (independent variables) in the experimental design
</p>
</div>
<div class="float-third-centre">
<p>
<code>control_for()</code>
</p>
<p>
to specify variables that should be controlled for between conditions
</p>
</div>
<div class="float-third-right">
<p>
<code>generate()</code>
</p>
<p>
to run the algorithm and generate the stimuli, using specified splits and controls
</p>
</div>
<p><br></p>
<div id="a-practical-example" class="section level3 unnumbered">
<h3>A Practical Example</h3>
<p>Imagine we want to generate stimuli for a 2x2 factorial design in a Lexical Decision Task, examining whether a possible effect of bigram probability interacts with concreteness.</p>
<p>For this, we might decide we want a stimulus set with the following features:</p>
<ul>
<li><p>Filtered such that <strong>at least 90% of people know each word</strong>, according to Brysbaert, Mandera, McCormick, and Keuleers (2019).</p></li>
<li><p><strong>Two levels of Concreteness</strong> (abstract and concrete words) according to Brysbaert, Warriner and Kuperman (2014).</p></li>
<li><p><strong>Two levels of Bigram Probability</strong> (low and high probability) based on SUBTLEX-UK (van Heuven, Mandera, Keuleers, &amp; Brysbaert, 2014).</p></li>
<li><p><strong>Controlled for word length</strong> (number of characters) exactly.</p></li>
<li><p><strong>Controlled for word frequency</strong> within ±0.2 Zipf, according to according to SUBTLEX-UK (van Heuven, Mandera, Keuleers, &amp; Brysbaert, 2014).</p></li>
<li><p><strong>25 words for each of the generated conditions</strong> (100 stimuli in total).</p></li>
</ul>
<p><br>
We can use the following R code to generate a stimulus list like this with LexOPS:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1"><span class="kw">library</span>(LexOPS)</a>
<a class="sourceLine" id="cb4-2" title="2"></a>
<a class="sourceLine" id="cb4-3" title="3">stim &lt;-<span class="st"> </span>lexops <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb4-4" title="4"><span class="st">  </span><span class="kw">subset</span>(PK.Brysbaert <span class="op">&gt;=</span><span class="st"> </span><span class="fl">0.9</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb4-5" title="5"><span class="st">  </span><span class="kw">split_by</span>(CNC.Brysbaert, <span class="dv">1</span><span class="op">:</span><span class="dv">2</span> <span class="op">~</span><span class="st"> </span><span class="dv">4</span><span class="op">:</span><span class="dv">5</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb4-6" title="6"><span class="st">  </span><span class="kw">split_by</span>(BG.SUBTLEX_UK, <span class="dv">0</span><span class="op">:</span><span class="fl">0.003</span> <span class="op">~</span><span class="st"> </span><span class="fl">0.009</span><span class="op">:</span><span class="fl">0.013</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb4-7" title="7"><span class="st">  </span><span class="kw">control_for</span>(Length, <span class="dv">0</span><span class="op">:</span><span class="dv">0</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb4-8" title="8"><span class="st">  </span><span class="kw">control_for</span>(Zipf.SUBTLEX_UK, <span class="fl">-0.2</span><span class="op">:</span><span class="fl">0.2</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb4-9" title="9"><span class="st">  </span><span class="kw">generate</span>(<span class="dt">n =</span> <span class="dv">25</span>)</a></code></pre></div>
<br>
<div class="info">
<p>
Important notes on LexOPS (non-standard) syntax:
</p>
<ul>
<li>
<p>
As in the tidyverse, variables in the dataframe can be referenced outside of quotation marks.
</p>
</li>
<li>
<p>
The <code>:</code> character is used in <code>split_by()</code> to specify numeric boundaries (e.g. <code>0.009:0.013</code> means any number from 0.009 to 0.013 is acceptable for this level of the variable), and in <code>control_for()</code> to specify tolerances (e.g. <code>-0.2:0.2</code> means controls will be acceptable if within ±0.2 of the match null).
</p>
</li>
<li>
<p>
The <code>~</code> character is used in <code>split_by()</code> to specify different levels of an independent variable (e.g. <code>1.5:2.5 ~ 3.5:4.5 ~ 5.5:6.5</code> would specify three levels).
</p>
</li>
</ul>
</div>
<p><br></p>
</div>
<div id="output" class="section level3 unnumbered">
<h3>Output</h3>
<p>Let’s have a closer look at the first 5 rows of <code>stim</code>, which contains the output from above:</p>
<div class="table">
<table>
<thead>
<tr class="header">
<th align="right">item_nr</th>
<th align="left">A1_B1</th>
<th align="left">A1_B2</th>
<th align="left">A2_B1</th>
<th align="left">A2_B2</th>
<th align="left">match_null</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">abide</td>
<td align="left">merit</td>
<td align="left">caddy</td>
<td align="left">basin</td>
<td align="left">A2_B1</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">unspecific</td>
<td align="left">sinisterly</td>
<td align="left">typescript</td>
<td align="left">storefront</td>
<td align="left">A1_B2</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="left">broadly</td>
<td align="left">reliant</td>
<td align="left">giraffe</td>
<td align="left">coroner</td>
<td align="left">A1_B2</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="left">deftly</td>
<td align="left">pathos</td>
<td align="left">smooch</td>
<td align="left">sandal</td>
<td align="left">A2_B2</td>
</tr>
<tr class="odd">
<td align="right">5</td>
<td align="left">ultra</td>
<td align="left">revel</td>
<td align="left">pluck</td>
<td align="left">minty</td>
<td align="left">A2_B2</td>
</tr>
</tbody>
</table>
</div>
<p><br>
We can see that we have 4 conditions:</p>
<ul>
<li><p><strong>A1_B1</strong> (abstract, low probability)</p></li>
<li><p><strong>A1_B2</strong> (abstract, high probability)</p></li>
<li><p><strong>A2_B1</strong> (concrete, low probability)</p></li>
<li><p><strong>A2_B2</strong> (concrete, high probability)</p></li>
</ul>
<p><br>
Each row of the dataframe is controlled for in terms of frequency and length. The <code>match_null</code> variable tells us which condition stimuli were matched relative to. For instance, we can see that in row 3, items are matched relative to the word “relent”. This means that all words for <code>item_nr</code> 3 are within ±0.2 Zipf of the Zipf value associated with the word “relent”. By default, LexOPS will select the match_null for each item pseudo-randomly, such that each condition will be used as a match null an equal number of times (<code>match_null = "balanced"</code>), or as close to this ideal as is possible (e.g. the number of items requested may not be divisible by the number of conditions). See <a href="faq.html#what-is-a-match-null">this FAQ section</a> for more information on match nulls.</p>
</div>
</div>
<div id="converting-to-long-format" class="section level2">
<h2><span class="header-section-number">2.2</span> Converting to Long Format</h2>
<p>The table above shows the generated stimuli in wide format. This is a useful way to quickly view the stimuli and get a sense for what has been generated, but we often want to check our stimuli in more detail. The <code>long_format()</code> function is a quick way to convert stimuli generated in LexOPS into long format:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1">stim_long &lt;-<span class="st"> </span><span class="kw">long_format</span>(stim)</a></code></pre></div>
<p>Now we have the same stimuli in long format, with their associated values. Here are the same first 5 matched items from earlier, but in long format:</p>

<div class="table">
<table>
<thead>
<tr class="header">
<th align="right">item_nr</th>
<th align="left">condition</th>
<th align="left">match_null</th>
<th align="left">string</th>
<th align="right">Zipf.SUBTLEX_UK</th>
<th align="right">Length</th>
<th align="right">BG.SUBTLEX_UK</th>
<th align="right">CNC.Brysbaert</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">A1_B1</td>
<td align="left">A2_B1</td>
<td align="left">abide</td>
<td align="right">3.453132</td>
<td align="right">5</td>
<td align="right">0.0029111</td>
<td align="right">1.68</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="left">A1_B2</td>
<td align="left">A2_B1</td>
<td align="left">merit</td>
<td align="right">3.577120</td>
<td align="right">5</td>
<td align="right">0.0122070</td>
<td align="right">1.66</td>
</tr>
<tr class="odd">
<td align="right">1</td>
<td align="left">A2_B1</td>
<td align="left">A2_B1</td>
<td align="left">caddy</td>
<td align="right">3.575405</td>
<td align="right">5</td>
<td align="right">0.0024618</td>
<td align="right">4.32</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="left">A2_B2</td>
<td align="left">A2_B1</td>
<td align="left">basin</td>
<td align="right">3.482487</td>
<td align="right">5</td>
<td align="right">0.0100465</td>
<td align="right">4.63</td>
</tr>
<tr class="odd">
<td align="right">2</td>
<td align="left">A1_B1</td>
<td align="left">A1_B2</td>
<td align="left">unspecific</td>
<td align="right">1.540834</td>
<td align="right">10</td>
<td align="right">0.0029410</td>
<td align="right">1.41</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">A1_B2</td>
<td align="left">A1_B2</td>
<td align="left">sinisterly</td>
<td align="right">1.473887</td>
<td align="right">10</td>
<td align="right">0.0098809</td>
<td align="right">1.75</td>
</tr>
<tr class="odd">
<td align="right">2</td>
<td align="left">A2_B1</td>
<td align="left">A1_B2</td>
<td align="left">typescript</td>
<td align="right">1.297796</td>
<td align="right">10</td>
<td align="right">0.0027336</td>
<td align="right">4.37</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">A2_B2</td>
<td align="left">A1_B2</td>
<td align="left">storefront</td>
<td align="right">1.473887</td>
<td align="right">10</td>
<td align="right">0.0096897</td>
<td align="right">4.00</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="left">A1_B1</td>
<td align="left">A1_B2</td>
<td align="left">broadly</td>
<td align="right">3.648528</td>
<td align="right">7</td>
<td align="right">0.0028142</td>
<td align="right">1.68</td>
</tr>
<tr class="even">
<td align="right">3</td>
<td align="left">A1_B2</td>
<td align="left">A1_B2</td>
<td align="left">reliant</td>
<td align="right">3.602609</td>
<td align="right">7</td>
<td align="right">0.0103099</td>
<td align="right">1.83</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="left">A2_B1</td>
<td align="left">A1_B2</td>
<td align="left">giraffe</td>
<td align="right">3.777083</td>
<td align="right">7</td>
<td align="right">0.0021165</td>
<td align="right">4.73</td>
</tr>
<tr class="even">
<td align="right">3</td>
<td align="left">A2_B2</td>
<td align="left">A1_B2</td>
<td align="left">coroner</td>
<td align="right">3.726335</td>
<td align="right">7</td>
<td align="right">0.0107999</td>
<td align="right">4.34</td>
</tr>
<tr class="odd">
<td align="right">4</td>
<td align="left">A1_B1</td>
<td align="left">A2_B2</td>
<td align="left">deftly</td>
<td align="right">2.329204</td>
<td align="right">6</td>
<td align="right">0.0025051</td>
<td align="right">1.96</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="left">A1_B2</td>
<td align="left">A2_B2</td>
<td align="left">pathos</td>
<td align="right">2.620015</td>
<td align="right">6</td>
<td align="right">0.0121742</td>
<td align="right">1.48</td>
</tr>
<tr class="odd">
<td align="right">4</td>
<td align="left">A2_B1</td>
<td align="left">A2_B2</td>
<td align="left">smooch</td>
<td align="right">2.263937</td>
<td align="right">6</td>
<td align="right">0.0028086</td>
<td align="right">4.21</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="left">A2_B2</td>
<td align="left">A2_B2</td>
<td align="left">sandal</td>
<td align="right">2.443924</td>
<td align="right">6</td>
<td align="right">0.0091593</td>
<td align="right">4.68</td>
</tr>
<tr class="odd">
<td align="right">5</td>
<td align="left">A1_B1</td>
<td align="left">A2_B2</td>
<td align="left">ultra</td>
<td align="right">3.572531</td>
<td align="right">5</td>
<td align="right">0.0029273</td>
<td align="right">1.55</td>
</tr>
<tr class="even">
<td align="right">5</td>
<td align="left">A1_B2</td>
<td align="left">A2_B2</td>
<td align="left">revel</td>
<td align="right">3.254444</td>
<td align="right">5</td>
<td align="right">0.0093859</td>
<td align="right">1.69</td>
</tr>
<tr class="odd">
<td align="right">5</td>
<td align="left">A2_B1</td>
<td align="left">A2_B2</td>
<td align="left">pluck</td>
<td align="right">3.377881</td>
<td align="right">5</td>
<td align="right">0.0019315</td>
<td align="right">4.00</td>
</tr>
<tr class="even">
<td align="right">5</td>
<td align="left">A2_B2</td>
<td align="left">A2_B2</td>
<td align="left">minty</td>
<td align="right">3.421647</td>
<td align="right">5</td>
<td align="right">0.0099473</td>
<td align="right">4.11</td>
</tr>
</tbody>
</table>
</div>

<p>Here we can see that indeed, the different conditions are within the boundaries we set, and that the variables used as controls are matched for items with the same <code>item_nr</code>.</p>
</div>
<div id="plotting-the-design" class="section level2">
<h2><span class="header-section-number">2.3</span> Plotting the Design</h2>
<p>While having data in long format is undoubtably useful, it’s not very efficient if you want to check what your stimuli look like in a quick glance (especially if your stimuli number in the thousands). What you probably want to do is create a plot to see how your stimuli differ between conditions and across matched items. Thankfully, LexOPS has a handy function to do exactly that:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1"><span class="kw">plot_design</span>(stim)</a></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-11"></span>
<img src="02-generate_files/figure-html/unnamed-chunk-11-1.png" alt="The results of the `plot_design()` function for the generated stimuli." width="100%" />
<p class="caption">
Figure 2.1: The results of the <code>plot_design()</code> function for the generated stimuli.
</p>
</div>
<p>The distributions of all the numeric variables used as independent variables or controls are plotted for each condition (in a grey violin plot). The points depict the values of individual words, and points of the same colour (joined by lines) are matched items. As we’d expect, our example stimuli show the expected differences in Bigram Probability and Concreteness, while Frequency is matched closely, and Length is matched exactly.</p>
</div>
<div id="checking-representativeness" class="section level2">
<h2><span class="header-section-number">2.4</span> Checking Representativeness</h2>
<p>We can also visualise how representative our stimuli are. This shows the distributions of our generated stimuli on variables, relative to possible but unused candidates.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1"><span class="kw">plot_sample</span>(stim)</a></code></pre></div>
<pre><code>## Warning: Removed 74 rows containing non-finite values (stat_density).</code></pre>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-12"></span>
<img src="02-generate_files/figure-html/unnamed-chunk-12-1.png" alt="**CAPTION THIS FIGURE!!**" width="100%" />
<p class="caption">
Figure 2.2: <strong>CAPTION THIS FIGURE!!</strong>
</p>
</div>
</div>
<div id="generating-as-many-as-possible" class="section level2">
<h2><span class="header-section-number">2.5</span> Generating as Many as Possible</h2>
<p>Let’s imagine that we’re not entirely sure how many stimuli we could generate using our design. It may be that the <code>n = 25</code> <a href="the-generate-pipeline.html#generating-stimuli">we used earlier</a> is considerably fewer than the number of stimuli we could generate with no problems. One way to test this is to have LexOPS generate as many stimuli as possible. We can do this by setting <code>n = "all"</code>:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" title="1">possible_stim &lt;-<span class="st"> </span>LexOPS<span class="op">::</span>lexops <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb9-2" title="2"><span class="st">  </span><span class="kw">subset</span>(PK.Brysbaert <span class="op">&gt;=</span><span class="st"> </span><span class="fl">0.9</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb9-3" title="3"><span class="st">  </span><span class="kw">split_by</span>(CNC.Brysbaert, <span class="dv">1</span><span class="op">:</span><span class="dv">2</span> <span class="op">~</span><span class="st"> </span><span class="dv">4</span><span class="op">:</span><span class="dv">5</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb9-4" title="4"><span class="st">  </span><span class="kw">split_by</span>(BG.SUBTLEX_UK, <span class="dv">0</span><span class="op">:</span><span class="fl">0.003</span> <span class="op">~</span><span class="st"> </span><span class="fl">0.009</span><span class="op">:</span><span class="fl">0.013</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb9-5" title="5"><span class="st">  </span><span class="kw">control_for</span>(Length, <span class="dv">0</span><span class="op">:</span><span class="dv">0</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb9-6" title="6"><span class="st">  </span><span class="kw">control_for</span>(Zipf.SUBTLEX_UK, <span class="fl">-0.2</span><span class="op">:</span><span class="fl">0.2</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb9-7" title="7"><span class="st">  </span><span class="kw">generate</span>(<span class="dt">n =</span> <span class="st">&quot;all&quot;</span>, <span class="dt">match_null =</span> <span class="st">&quot;random&quot;</span>)</a></code></pre></div>
<p>This is much slower, as LexOPS will continue trying to generate combinations of words that fit the specified characteristics until it has exhausted all the possibilities. Nevertheless, we actually generated 101 words generated per condition with the code above. This number is likely to change slightly each time we run the pipeline, as different combinations are randomly made from all the possible combinations. That said, it is a fairly good <em>indication</em> of the number of possible stimuli we could generate.</p>
<p>The 101 words we’ve managed to generate per condition here is quite a bit higher than the 25 we originally generated. Does this mean we should just request a larger stimulus list, such as <code>n = 80</code>, or even <code>n = 100</code>? Well, it depends. If we want as many stimuli as are possible, then it may make sense to just set <code>n = "all"</code>, but often we only want to use as many stimuli as we need to find our effect. Also, if we use as many combinations as possible, experimenters who want to replicate our effect using a different set of stimuli will likely have fewer novel combinations available to them.</p>
<div class="danger">
<p>
Note that when <code>n = “all”</code>, you will get a warning if you also keep the default match null setting, <code>match_null = “balanced”</code>. The reason for this is explained in <a href="faq.html#what-is-a-match-null">this FAQ section</a>.
</p>
</div>
</div>
<div id="plotting-iterations" class="section level2">
<h2><span class="header-section-number">2.6</span> Plotting Iterations</h2>
<p>It is also possible to check how well LexOPS performed when generating stimuli by plotting the cumulative item generation by iterations. To do this, we can use the <code>plot_iterations()</code> function. As an example, let’s visualise the algorithm’s iterations when we generated as many stimuli as we could in the last section.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" title="1"><span class="kw">plot_iterations</span>(possible_stim)</a></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-15"></span>
<img src="02-generate_files/figure-html/unnamed-chunk-15-1.png" alt="The cumulative number of items generated per iteration." width="100%" />
<p class="caption">
Figure 2.3: The cumulative number of items generated per iteration.
</p>
</div>
<p>This shows a characteristic levelling-off; iterations become increasingly less likely to successfully generate items as the pool of possible combinations is gradually exhausted.</p>
</div>
<div id="custom-dataframes" class="section level2">
<h2><span class="header-section-number">2.7</span> Custom Dataframes</h2>
<p>While the <a href="introduction.html#the-lexops-dataset">LexOPS Dataset</a> has lots of useful features for English, it isn’t exhaustive, and other languages do exist! The LexOPS functions will actually work with any dataframe, with words from any language. As an example, here’s how to generate a stimulus list of negative, neutral, and positive German words matched for length and frequency, based on the <a href="http://doi.org/10.3758/BRM.42.4.987">Leipzig Affective Norms for German (LANG) (Kanske &amp; Kotz, 2010)</a>.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" title="1"><span class="kw">library</span>(readr)</a>
<a class="sourceLine" id="cb11-2" title="2">LANG &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;kanske_kotz_2010.csv&quot;</span>, <span class="dt">locale=</span><span class="kw">locale</span>(<span class="dt">encoding =</span> <span class="st">&quot;latin1&quot;</span>))</a>
<a class="sourceLine" id="cb11-3" title="3"></a>
<a class="sourceLine" id="cb11-4" title="4">stim &lt;-<span class="st"> </span>LANG <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb11-5" title="5"><span class="st">  </span><span class="kw">split_by</span>(valence_mean, <span class="dv">1</span><span class="op">:</span><span class="fl">3.5</span> <span class="op">~</span><span class="st"> </span><span class="fl">4.75</span><span class="op">:</span><span class="fl">5.25</span> <span class="op">~</span><span class="st"> </span><span class="fl">6.5</span><span class="op">:</span><span class="dv">9</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb11-6" title="6"><span class="st">  </span><span class="kw">control_for</span>(number_of_letters, <span class="dv">0</span><span class="op">:</span><span class="dv">0</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb11-7" title="7"><span class="st">  </span><span class="kw">control_for</span>(frequency, <span class="dv">-1</span><span class="op">:</span><span class="dv">1</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb11-8" title="8"><span class="st">  </span><span class="kw">generate</span>(<span class="dv">20</span>, <span class="dt">string_col =</span> <span class="st">&quot;word&quot;</span>)</a></code></pre></div>
<p>Here are the first five items generated for each condition:</p>

<div class="table">
<table>
<thead>
<tr class="header">
<th align="right">item_nr</th>
<th align="left">A1</th>
<th align="left">A2</th>
<th align="left">A3</th>
<th align="left">match_null</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">hetze</td>
<td align="left">blase</td>
<td align="left">flirt</td>
<td align="left">A2</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">bombe</td>
<td align="left">stamm</td>
<td align="left">komik</td>
<td align="left">A3</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="left">pein</td>
<td align="left">seil</td>
<td align="left">kuss</td>
<td align="left">A1</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="left">ärger</td>
<td align="left">stein</td>
<td align="left">humor</td>
<td align="left">A3</td>
</tr>
<tr class="odd">
<td align="right">5</td>
<td align="left">terror</td>
<td align="left">lehrer</td>
<td align="left">gefühl</td>
<td align="left">A1</td>
</tr>
</tbody>
</table>
</div>

<br>
<div class="info">
<p>
Note that if you’re using your own dataframe, you’ll have to specify which column contains the strings with the <code>string_col</code> argument of the <code>generate()</code> function (above, <code>string_col = “word”</code>), or else rename the column to be “string”.
</p>
<p>
Custom variables can be neatly integrated with the inbuilt LexOPS dataset (or vice versa) with the <a href="https://dplyr.tidyverse.org/reference/join.html">dplyr join functions</a>. This is how custom variables are used in the Shiny app. See <a href="lexops-shiny-app.html#custom-variables">this section</a> for a example using custom variables in the shiny app.
</p>
</div>
<p><br></p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="introduction.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="advanced-stimulus-generation.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"],
"google": false
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": {},
"toc": {
"collapse": "subsection",
"scroll_highlight": true
}
});
});
</script>

</body>

</html>
